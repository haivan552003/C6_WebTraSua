 @page "/Category"
<p> <a href="AddCategories">Thêm danh mục sản phẩm</a></p>
<div class="panel panel-primary">
    <!-- Default panel contents -->
    <div class="panel-heading"><h2>Thông tin danh mục sản phẩm </h2></div>

    <!-- Table -->
    <table class="table">
        <thead>
            <tr>
                <th>Tên</th>
                <th>Hình Ảnh</th>
                <th>Trạng Thái</th>
                <th>Khác</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Categoriss)
            {
                <tr>
                    <td>@item.Name</td>
                    <td>
                        <img src="@GetImagePath(item.Image)" width="100" height="100" />
                    </td>

                    @if (item.Status == 0)
                    {
                        <td>@item.Status.ToString("Hợp lệ")</td>
                    }
                    else
                    {
                        <td>@item.Status.ToString("Không hợp lệ")</td>

                    }

                    <td><a class="btn btn-success" href="EditCategoris/@item.CateID">Sửa</a></td>


                </tr>
            }
        </tbody>

    </table>
</div>


@code {
    string imageBasePath = "http://localhost:49972/images";

    string urlBanner = "http://localhost:20714/api/Categories";
    public string FormSubmitMessage { get; set; } = "Banner Not Created";
    public IEnumerable<Categories> Categoriss { get; set; } = Enumerable.Empty<Categories>();


    protected async override Task OnInitializedAsync()
    {
        await CallAPI();
    }

    async Task CallAPI()
    {
        using (var httpClient = new HttpClient())
        {
            var response = await httpClient.GetAsync(urlBanner);
            var apiResponse = await response.Content.ReadAsStringAsync();
            Categoriss = JsonConvert.DeserializeObject<List<Categories>>(apiResponse);
        }
    }


    private string GetImagePath(string imageName) => $"{imageBasePath}/{imageName}";
}